{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst KEY = '21553593-5dff095819739d8fe44d39f5a';\n\nexport function search(element, page) {\n  const url = `${BASE_URL}?key=${KEY}&q=${element}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`;\n  return axios.get(url);\n}\n","export function renderMarkup(arr, galleryEl) {\n  const markup = arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n            <li class=\"gallery-list-item\">\n                <a class=\"gallery_link\" href=\"${largeImageURL}\">\n                    <img class=\"gallery_img\" src=\"${webformatURL}\" \n                        alt=\"${tags}\" \n                        title=\"${tags}\" />\n                    <ul class=\"statistics-list\">\n                        <li class=\"statistics-item\">\n                            <p class=\"statistics-item_name\">Likes</p>\n                            <p class=\"statistics_result\">${likes}</p>\n                        </li>\n                        <li class=\"statistics-item\">\n                            <p class=\"statistics-item_name\">Views</p>\n                            <p class=\"statistics_result\">${views}</p>\n                        </li>\n                        <li class=\"statistics-item\">\n                            <p class=\"statistics-item_name\">Comments</p>\n                            <p class=\"statistics_result\">${comments}</p>\n                        </li>\n                        <li class=\"statistics-item\">\n                            <p class=\"statistics-item_name\">Downloads</p>\n                            <p class=\"statistics_result\">${downloads}</p>\n                        </li>\n                    </ul>\n                </a>\n            </li>`;\n      }\n    )\n    .join('');\n  galleryEl.insertAdjacentHTML('beforeend', markup);\n}\n","//library 1\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n//library 2\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n//imports from folder JS\nimport { search } from './js/pixabay-api';\nimport { renderMarkup } from './js/render-functions';\n\n//const from HTML\nconst galleryListEl = document.querySelector('.gallery-list');\nconst formEl = document.querySelector('form');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreBtnEl = document.querySelector('.load-more-btn-js');\n\nlet lightbox = new SimpleLightbox('.gallery-list a', {});\n\nlet page = 1;\nlet cardHeight = 0;\nlet foundValue = '';\n\n//! first function\nconst elementForSearch = async event => {\n  //todo\n  try {\n    //\n    event.preventDefault();\n    //\n    foundValue = event.target.elements.choiceSearch.value.toLowerCase().trim();\n    //\n    page = 1;\n\tgalleryListEl.innerHTML = '';\n    //\n    if (!foundValue) {\n      iziToast.error({ message: 'Please enter a search word.' });\n      return;\n    }\n    //\n    loaderEl.style.display = 'block';\n    //\n    const response = await search(foundValue, page);\n    //\n    if (response.data.totalHits === 0) {\n      loadMoreBtnEl.classList.add('is-hidden');\n      iziToast.info({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      galleryListEl.innerHTML = '';\n      return;\n    }\n    //\n    renderMarkup(response.data.hits, galleryListEl);\n    //\n    const galleryCardEl = galleryListEl.querySelector('li');\n    cardHeight = galleryCardEl.getBoundingClientRect().height;\n    //\n    if (response.data.totalHits > 15) {\n      loadMoreBtnEl.classList.remove('is-hidden');\n    }else{\n\t\tloadMoreBtnEl.classList.add('is-hidden');\n\t}\n    //\n    lightbox.refresh();\n    //\n    formEl.reset();\n\n    //todo\n  } catch (err) {\n    iziToast.error({\n      message: err.message,\n      messageColor: '#fff',\n      position: 'topRight',\n      color: '#ef4040',\n      maxWidth: '350px',\n    });\n\n    //todo\n  } finally {\n    loaderEl.style.display = 'none';\n    formEl.reset();\n  }\n};\n\n//! second function\nconst onLoadMoreClick = async () => {\n  //todo\n  try {\n    page += 1;\n    //\n    loadMoreBtnEl.classList.add('is-hidden');\n    //\n    loaderEl.style.display = 'block';\n    //\n    const response = await search(foundValue, page);\n    //\n\n    renderMarkup(response.data.hits, galleryListEl);\n    //\n    lightbox.refresh();\n    //\n    scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n    \n    loadMoreBtnEl.classList.remove('is-hidden');\n    //\n    if (page === Math.ceil(response.data.totalHits / 15)) {\n      loadMoreBtnEl.classList.add('is-hidden');\n      iziToast.warning({\n        title: 'Info',\n        message: 'Were sorry, but you have reached the end of search results.',\n        position: 'topRight',\n      });\n    }\n\n    //todo\n  } catch (err) {\n    iziToast.error({\n      message: err.message,\n      messageColor: '#fff',\n      position: 'topRight',\n      color: '#ef4040',\n      maxWidth: '350px',\n    });\n\n    //todo\n  } finally {\n    loaderEl.style.display = 'none';\n  }\n};\n\nformEl.addEventListener('submit', elementForSearch);\nloadMoreBtnEl.addEventListener('click', onLoadMoreClick);\n"],"names":["BASE_URL","KEY","search","element","page","url","axios","renderMarkup","arr","galleryEl","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","galleryListEl","formEl","loaderEl","loadMoreBtnEl","lightbox","SimpleLightbox","cardHeight","foundValue","elementForSearch","event","iziToast","response","err","onLoadMoreClick"],"mappings":"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"}